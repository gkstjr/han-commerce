# Han-Commerce

<br>

## 🖥️ 프로젝트 소개
<br>


**Han-Commerce**는 E-commerce 도메인의 기본 기능들을 SpringBoot 기반 RestAPI 개인 프로젝트입니다.

<br>

Swagger UI :  http://3.39.193.88:8080/swagger-ui/index.html
<br>

### 프로젝트 순서

1. 프로젝트로 얻고자 하는 목표 설정
2. 사용 기술 , 개발 환경 , 도메인 등 결정
3. 기능 구현 목록 정리 후 기반 삼아 도메인 모델링 설계
4. ERD 데이터 베이스 설계
5. 코드 작성(이전 단게의 부족한 부분들을 보완하면서 진행) , 테스트
6. 배포 , 운영
  
<br>

## 🕰️ 프로젝트를 하게 된 이유 
<br>

JPA를 학습 후 실무에서 사용할 수 있는 상황이 없어 프로젝트를 구현하며 동작원리를 이해하고 발생하는 문제들을 해결하는 경험을 위해 진행

<br>

**CI/CD PipeLine을 적용하여 배포 자동화 경험** 

<br>

보안 부분에서 Spring Security 와 JWT의 흐름을 파악하고 적용 해보기 위해 진행

<br>

간단한 테스트(Junit) 코드도 진행해볼 것(CI/CD 자동화 적용 후 유지보수 때 진행)

<br>

swagger를 통해 restAPI의 문서화를 진행


<br>

## ⚙️ 기술 스택

<br>

![image](https://github.com/gkstjr/han-commerce/assets/99389922/474d243e-934c-407c-9487-dccbcf230196)

<br>

## 📌 CI / CD PipeLine

<br>

![image](https://github.com/gkstjr/han-commerce/assets/99389922/68f379d1-a34e-4ff0-937b-9e78cc842b04)

## 🧑‍🤝‍🧑 기능 소개
 
<br>

| 구분 | 주 기능 | 참고 |
|---|---|---|
| 고객 | 회원가입 |     |
|   |  로그인  | 사용자 , 관리자로 구분 | 
|   | 내 정보 조회 | ID , 전화번호 , 기본 주소(도시 , 거리 , 상세) |
|   | 전체 회원 조회  | 관리자 권한  |
|   | 수정  | 사용자는 자신의 아이디 수정 가능  |
| 상품 |  등록 | 관리자는 상품 등록 가능(카테고리 필수 입력) |
|   | 수정 및 삭제 | 관리자 가능 |
|   | 조회 | 카테고리 별 , 전체 조회 |
|   | 상세 정보 조회 |   |
|   | 카테고리  | 관리자가 등록 , 삭제 , 수정 가능 |
|주문| 생성 | 여러 상품 주문 가능 |
|   | 취소  | 자동으로 배송도 취소 |
|   | 조회  |   |
|배송| 조회 | 관리자는 전체 배송 조회 가능  |
|   | 배송 완료 | 자동으로 주문 완료 |

<br>


## 💡 TROUBLE SHOOTING

<br>

* **Spring Security 설정 부분에서 기존에 학습했던 기억을 되 살려 메서드 체이닝 형태로 코드를 진행하였지만 계속 컴파일 오류가 뜨는 문제가 발생하였습니다.**

  구글링을 해봐도 최신 버전 이슈다 보니 알맞은 정보를 찾지 못하다가 아직 뭔지모를 낯설음?으로 조용히 회피했던 공식문서를 찾아보게 되었는데 

  Secuirty 부분을 검색을 통해 찾아보며 6.1 버전 이후 부터 WebSecurityConfigurerAdapter가 삭제되어

  @Bean 으로 SecurityFilterChain 등록하여 직접 구현하는 방식으로 변경되었다는 힌트를 얻었고 해당 키워드를 통해
  
  손쉽게 해결방안을 찾을 수 있었습니다. **이번 경험을 통해 공식 문서를 보는 것이 가장 빠르고 정확한 방법중에 하나라는 것을 깨닫는 계기가 되었습니다.**

<br>

* **n+1 문제가 생겼을 떄 → fetchjoin을 하면 좋은점에 대해 이해했지만 추후에 까먹을 걸 대비해 기록해놓음(개념정리 해서 블로그 글 올리고 링크 달기)**

<br>

* **AWS 에서 EC2 생성하여 배포 중 ubuntu OS를 이용했는데 프리티어 사용량에서 data-transfer 부분이 과하게 나오길래** 무슨 문제일까 찾아보다가
  
  ubuntu 관련 update를 할 때 aws에서 다른 리전의 요청을 하게 설정이 되있어서 region 간의 데이터 송수신이 이뤄지기 때문이였다.

<br>

* 처음에는 Entity를 요청과 응답에 사용하면 안된다는 말이 잘 와닿지 않아 신경쓰지 않고 구현하였는데 Entity의 필드들이 추가되고 수정되면서 

  응답에 원하지 않는 필드도 표시되는 걸 억지로 @JsonIgnore 로 커버했지만 유지보수의 불편함을 느껴 요청 응답을 DTO로 수정하느라 고생했습니다.
  
<br>

## ⚙️ ERD 

<br>

![image](https://github.com/gkstjr/han-commerce/assets/99389922/95e7e103-3542-4bf9-8f77-853560f11703)



